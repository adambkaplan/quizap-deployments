# Default values for bootstrap chart
# This is a YAML-formatted file.

# Global configuration
global:
  # Namespace where ArgoCD Applications will be created
  namespace: argo-cd
  # ArgoCD project name
  project: default
  # Destination server for all applications
  destination:
    server: https://kubernetes.default.svc
  # Sync policy for applications
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true
      - PrunePropagationPolicy=foreground
      - PruneLast=true
      - ServerSideApply=true

# Gateway API configuration
gatewayApi:
  targetRevision: v1.4.0
  path: config/crd

# cert-manager configuration
certManager:
  enabled: true
  namespace: cert-manager
  targetRevision: v1.19.0
  values:
    crds:
      enabled: true
    config:
      apiVersion: controller.config.cert-manager.io/v1alpha1
      kind: ControllerConfiguration
      enableGatewayAPI: true

# NGINX Gateway Fabric configuration
nginxGatewayFabric:
  enabled: true
  namespace: nginx-gateway-fabric
  targetRevision: 2.1.4
  values:
    nginx:
      service:
        type: NodePort
        nodePorts:
          - port: 31437
            listenerPort: 80
          - port: 31438
            listenerPort: 443
      nodeSelector:
        node-role.kubernetes.io/worker: ""

# Central Gateway configuration
centralGateway:
  enabled: true
  namespace: central-gateway
  repoURL: https://github.com/adambkaplan/quizap-deployments.git
  targetRevision: helm-bootstrap
  values:
    ca:
      certManagerNamespace: cert-manager
    gateway:
      name: central-gateway
      hostname: k8s.local
      gatewayClassName: nginx

argoCD:
  enabled: true
  namespace: argo-cd
  targetRevision: 8.6.3
  values:
    global:
      domain: argo-cd.k8s.local
    configs:
      params:
        server.insecure: true
    server:
      httproute:
        enabled: true
        hostnames:
        - argo-cd.k8s.local
        parentRefs:
        - group: gateway.networking.k8s.io
          kind: Gateway
          name: central-gateway
          namespace: central-gateway
          sectionName: https-wildcard


# ArgoCD Application resource configuration
argocdApplication:
  # Finalizers for the Application resource
  finalizers:
    - resources-finalizer.argocd.argoproj.io
  # Additional labels
  labels: {}
  # Additional annotations
  annotations: {}
